<!-- <div class="card mt-3">
  <div class="card-body">
    <h5>Current Orders</h5>
    <div *ngIf="activeOrders.length === 0" class="text-muted">No current orders</div>
    <div *ngFor="let o of activeOrders" class="border p-2 mb-2">
      <div><strong>Order #{{ o.id }}</strong> — ₹{{ o.totalAmount }} — {{ o.status }}</div>
      <div *ngFor="let it of o.items"><small>{{ it.name }} x {{ it.qty }}</small></div>
      <div class="mt-2">
        <button class="btn btn-sm btn-primary me-1" (click)="setStatus(o,'PREPARING')" [disabled]="o.status === 'PREPARING'">Mark Preparing</button>
        <button class="btn btn-sm btn-success me-1" (click)="setStatus(o,'OUT_FOR_DELIVERY')" [disabled]="o.status === 'OUT_FOR_DELIVERY'">Out for delivery</button>
      </div>
    </div>

    <hr />
    <h5>Order History</h5>
    <div *ngIf="historyOrders.length === 0" class="text-muted">No order history</div>
    <div *ngFor="let o of historyOrders" class="border p-2 mb-2">
      <div><strong>Order #{{ o.id }}</strong> — ₹{{ o.totalAmount }} — {{ o.status }}</div>
      <div *ngFor="let it of o.items"><small>{{ it.name }} x {{ it.qty }}</small></div>
    </div>
   

  </div>
</div> -->
<!-- owner-orders.component.html (temporary debug X) -->
<!-- src/app/components/owner-orders/owner-orders.component.html -->
<div class="card mt-3">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5 class="mb-0">Current Orders (Owner)</h5>
      <div *ngIf="loading" class="text-muted">Loading…</div>
    </div>

    <div *ngIf="!loading && activeOrders?.length === 0" class="text-muted">No current orders</div>

    <div *ngFor="let o of activeOrders" class="border p-3 mb-3 rounded">
      <div class="d-flex justify-content-between align-items-start">
        <div>
          <strong>Order #{{ o.id }}</strong>
          <div class="small text-muted">Placed: {{ o.createdAt | date:'medium' }}</div>
          <div class="mt-1">Customer: <strong>{{ o.customerId || '—' }}</strong></div>
        </div>
        <div class="text-end">
          <div class="fw-bold">₹{{ o.totalAmount }}</div>
          <div class="small text-muted">Delivery: ₹{{ o.deliveryCharge }}</div>
        </div>
      </div>

      <hr />

      <div *ngFor="let it of (o.items || [])" class="d-flex justify-content-between mb-1">
        <div>
          <strong>{{ it.name }}</strong>
          <div class="small text-muted">Qty: {{ it.qty }} • {{ it.veg ? 'Veg' : 'Non-Veg' }}</div>
        </div>
        <div class="text-end">₹{{ it.price }}</div>
      </div>

      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-sm btn-primary" (click)="setStatus(o, 'PREPARING')" [disabled]="o.status === 'PREPARING'">Mark Preparing</button>
        <button class="btn btn-sm btn-success" (click)="setStatus(o, 'OUT_FOR_DELIVERY')" [disabled]="o.status === 'OUT_FOR_DELIVERY'">Out for delivery</button>
      </div>
    </div>

    <hr />

    <h6>Order History</h6>
    <div *ngIf="historyOrders?.length === 0" class="text-muted">No order history</div>
    <div *ngFor="let o of historyOrders" class="border p-2 mb-2">
      <div class="d-flex justify-content-between">
        <div><strong>Order #{{ o.id }}</strong><div class="small text-muted">Status: {{ o.status }}</div></div>
        <div>₹{{ o.totalAmount }}</div>
      </div>
      <div *ngFor="let it of (o.items || [])" class="small">{{ it.name }} x {{ it.qty }}</div>
    </div>
  </div>
</div>
