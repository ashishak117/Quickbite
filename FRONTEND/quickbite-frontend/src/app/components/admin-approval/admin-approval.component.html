

<div class="card mt-3">
  <div class="card-body">
    <h5>Restaurant Approvals</h5>

    <div *ngIf="loading" class="text-muted">Loading...</div>
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <div *ngIf="!loading && pending.length === 0 && !error" class="text-muted">No pending approvals</div>

    <div *ngFor="let p of pending" class="border p-2 mb-2 d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ p.name }}</strong>
        <div class="small text-muted">{{ p.address }}</div>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-sm btn-info" (click)="viewDetails(p)">View</button>
        <button class="btn btn-sm btn-success" (click)="approve(p.id)">Approve</button>
        <button class="btn btn-sm btn-danger" (click)="deny(p.id)">Deny</button>
      </div>
    </div>
  </div>
</div>

<!-- details modal (simple in-template modal) -->
<div *ngIf="selected" class="approval-modal-backdrop">
  <div class="approval-modal card p-3">
    <div class="d-flex justify-content-between align-items-start">
      <h5>Restaurant details</h5>
      <button class="btn btn-sm btn-outline-secondary" (click)="selected=null">Close</button>
    </div>

    <div class="mt-2">
      <div><strong>Name:</strong> {{ selected.name }}</div>
      <div><strong>Address:</strong> {{ selected.address }}</div>
      <div><strong>About:</strong> <div class="small text-muted">{{ selected.about }}</div></div>
      <div><strong>Email:</strong> {{ selected.email }}</div>
      <div><strong>Phone:</strong> {{ selected.phone }}</div>
      <div *ngIf="selected.image" class="mt-2"><img [src]="selected.image" style="max-width:200px; max-height:150px; object-fit:cover" /></div>
      <hr />
      <div><strong>Owner ID:</strong> {{ selected.ownerId }}</div>
      <div *ngIf="ownerInfo"><strong>Owner email:</strong> {{ ownerInfo.email }}</div>
      <div *ngIf="ownerInfo"><strong>Owner name:</strong> {{ ownerInfo.name }}</div>
      <!-- never show password -->
    </div>

    <div class="mt-3 d-flex gap-2">
      <button class="btn btn-success" (click)="approve(selected.id)">Approve</button>
      <button class="btn btn-danger" (click)="deny(selected.id)">Deny</button>
      <button class="btn btn-outline-secondary" (click)="selected=null">Close</button>
    </div>
  </div>
</div>
